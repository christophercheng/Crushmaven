{% extends "base.html" %}
{% block content %}

<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css">

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script>

<div id="dialog" title="Remove Crush">Are you sure you want to remove this person from your crush list?</div>


<script type="text/javascript">

$(document).ready(function() 
{
	$("#dialog").dialog({
	    modal: true,
	    autoOpen: false
	});

	$("a.delete").click(function(e) {
		var name=$(this).attr('name');
		var username=$(this).attr('username');
		var bSecret=$(this).attr('secret');
		e.preventDefault();
		$("#dialog").text("Are you sure you want to remove " + name + " from your crush list?");
		$("#dialog").dialog('option', 'buttons', {
        "Delete": function() {
        	if (bSecret=="true")
        		window.location = "{{request_uri}}" + '?delete_secret=' + username;
        	else
        		window.location = "{{request_uri}}" + '?delete_open=' + username;
        },
        "Cancel": function() {
            $(this).dialog("close");
        }
    });

	    $("#dialog").dialog("open");
	    return false;
	});

});

</script>


<h2>Secret Crushes:</h2>
{% if secret_crush_relationships %}

<TABLE width=700 >
	<tr align="left" bgcolor="LightPink">
		<th>Name</th>
		<th>Friendship</th>
		<th>Date Added</th>
		<th>Status</th>
		<th>Options</th>
	</tr>
		{% for relationship in secret_crush_relationships %}
	<tr> 
		<td>{{relationship.target_person.first_name}} {{relationship.target_person.last_name}} <small>({{relationship.target_person.username}})</small></td>
		<td>{{relationship.get_friendship_type_display}}</td>
		<td>{{relationship.date_added}}</td>
		<td>{{relationship.get_target_person_assessment_display}}</td>
		<td ><a username="{{relationship.target_person.username}}" name= "{{relationship.target_person.first_name}} {{relationship.target_person.last_name}}" class="delete" secret="true" href="#" >remove</a></td>
	</tr>
	{% endfor %}

</TABLE>
	
{% else %}
	You have no secret crushes.  <a href="/search/">Click here</a> to find a friend of interest.
{% endif %}

<h2>Open Crushes:</h2>
{% if open_crush_relationships %}

<TABLE width=700 >
	<tr align="left" bgcolor="LightPink">
		<th>Name</th>
		<th>Friendship</th>
		<th>Date Added</th>
		<th>Status</th>
		<th>Options</th>
	</tr>
		{% for relationship in open_crush_relationships %}
	<tr> 
		<td>{{relationship.target_person.first_name}} {{relationship.target_person.last_name}} <small>({{relationship.target_person.username}})</small></td>
		<td>{{relationship.get_friendship_type_display}}</td>
		<td>{{relationship.date_added}}</td>
		<td>{{relationship.get_target_person_assessment_display}}</td>
		<td ><a username="{{relationship.target_person.username}}" name= "{{relationship.target_person.first_name}} {{relationship.target_person.last_name}}" class="delete" secret="false" href="#" >remove</a></td>
	</tr>
	{% endfor %}

</TABLE>
{% else %}
	You have no open crushes. <a href="/search/">Click here</a> to find someone of interest.
{% endif %}

{% endblock %}